---
layout:     post
title:      Webpack的本地搭建
date:       2020-07-14
author:     violetks
header-img: img/post-bg-css.png
catalog: true
tags:
    - < webpack学习笔记 >
---

> `webpack` 是一个模块打包工具。参考[《深入浅出Webpack》](https://webpack.wuhaolin.cn/)

### Webpack的本地搭建

#### 1.新建文件夹 webpack-demo。

```html
// index.html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <div id="app"></div>
  <script src="./src/index.js"></script>
</body>
</html>
```

```javascript
// src/index.js
import Header from './header.js';
import Content from './content.js';

new Header();
new Content();
```

```javascript
// src/header.js
function Header() {
  var dom = document.getElementById('app');
  var header = document.createElement('div');
  header.innerText = 'header';
  dom.append(header);
}

export default Header;
```

```javascript
// src/content.js
function Content() {
  var dom = document.getElementById('app');
  var content = document.createElement('div');
  content.innerText = 'content';
  dom.append(content);
}

export default Content;
```

#### 2.`npm init [-y]` 初始化项目，生成 package.json 文件。

#### 3.安装 webpack 和 webpack-cli。

```javascript
# 在项目里安装，因为可能不同项目中使用不同webpack版本。
$ npm i webpack webpack-cli -D

$ webpack -v             // 打印出全局的版本
$ npx webpack -v         // 打印出当前目录的版本

$ npm info webpack       // 安装前查看版本号
$ npm install webpack@4.16.5 webpack-cli -D  // 安装指定版本
```

#### 4.修改 package.json 文件。

加上 `"private": true` 表示私有，设置为 `true` 时，`npm` 拒绝发布。<br>

![aTVWg1.png](https://s1.ax1x.com/2020/08/09/aTVWg1.png)

#### 5.项目根目录下新建webpack的配置文件 `webpack.config.js`。

```javascript
// webpack.config.js
const path = require('path');

module.exports = {
  mode: 'production',
  // JavaScript 执行入口文件
  entry: './src/index.js',
  output: {
    // 将所有依赖的模块合并输出到一个 bundle.js 文件
    filename: 'bundle.js',
    // 将输出文件都放到 dist 目录下
    path: path.resolve(__dirname, './dist'),
  }
};
```

```javascript
# 设置webpackconfig.js为配置文件
$ npx webpack --config webpackconfig.js
```

#### 6.`npx webpack/npm run dev` 打包，生成 `dist` 文件夹，里面有 `bundle.js` 文件。

![aTKR8e.png](https://s1.ax1x.com/2020/08/09/aTKR8e.png)

#### 7.在 `index.html` 将打包文件引入，再打开 `index.html`，页面运行成功。

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <div id="app"></div>
  <!-- 导入 Webpack 输出的 JavaScript 文件 -->
  <script src="./dist/bundle.js"></script>
</body>
</html>
```


打包图片
npm install file-loader -D
npm run dev