---
layout:     post
title:      Vue2基础知识（三）
date:       2023-01-03
author:     violetks
header-img: img/post-vue.jpg
catalog: true
tags:
    - Vue
---

#### 一、Vuex的功能？能否进行兄弟组件之间的传值？
[Vuex](https://vuex.vuejs.org/zh/)是一个专为 Vue.js 应用程序开发的**状态管理模式**。它采用**集中式存储**管理应用的所有组件的状态，并以相应的规则保证状态以一种可预测的方式发生变化。<br>
主要用于管理vue中的共享状态，可以兄弟组件互相传值；

![lqZmcT.png](https://s2.ax1x.com/2020/01/14/lqZmcT.png)
 <!-- ![lqZmcT.png](/instructPic/lqZmcT.png) -->

上图的说明：<br>
①**Vue Components**是**vue 组件**，会触发（dispatch）一些事件或动作（**Actions**）；<br>
②在 **vuex** 中，数据是集中管理的，我们不能直接去更改数据，所以会把这个动作（Commit）到 **Mutations** 中；<br>
③接着 **Mutations** 就去改变（Mutate）**State** 中的数据；<br>
④当 **State** 中的数据改变之后，就会重新渲染（Render）到**Vue Components**中，**Vue Components**展示更新后的数据。<br>

**Vuex 的核心是 Store（仓库）**，相当于是一个容器。一个Store实例中包含以下属性和方法：<br>
**state**定义属性（状态、数据）；<br>
**mutations**定义方法（动作）：通过提交 mutations 的方式，而非直接改变 `store.state.count`。<br>
通过 `store.state` 来获取状态对象，以及通过 `store.commit` 方法触发状态变更。<br>

#### 二、Axios
Axios 是一个基于 promise 的 HTTP 库，可以用在浏览器和 node.js 中。<br>
- (Axios 使用说明)[https://www.kancloud.cn/yunye/axios/234845]
- (Axios 中文网)[http://www.axios-js.com/]
- (Axios 源码深度剖析)[https://juejin.im/post/5b0ba2d56fb9a00a1357a334]

#### 三、如何将axios异步请求同步化处理？
```javascript
//使用 asyns/await
async getHistoryData (data) {
 try {
   let res = await axios.get('/api/survey/list/', {
     params: data
   })
   this.tableData = res.data.result
   this.totalData = res.data.count
 } catch (err) {
   console.log(err)
   alert('请求出错！')
 }
}
```

#### 四、你有封装过axios吗？主要是封装哪方面的？
![aGiZ7j.png](https://s1.ax1x.com/2020/08/01/aGiZ7j.png)
 <!-- ![aGiZ7j.png](/instructPic/aGiZ7j.png) -->

到具体的页面中应用：

![aGii1f.png](https://s1.ax1x.com/2020/08/01/aGii1f.png)
 <!-- ![aGii1f.png](/instructPic/aGii1f.png) -->

#### 五、单页应用（SPA）与多页应用（MPA）的区别
**1、多页应用**<br>
有多个独立的页面的应用，每个公共资源（js、css等）需选择性重新加载，多页面跳转刷新所有资源。每一次页面跳转时，服务器都会返回一个新的html文档。常用于app或客户端等。<br>
**2、多页应用的优缺点：**<br>
（1）首屏时间快：首屏时间叫做页面首个屏幕的内容展现的时间，当我们访问页面的时候，服务器返回一个html，页面就会展示出来，这个过程只经历了一个HTTP请求，所以页面展示的速度非常快。<br>
（2）搜索引擎优化效果好（SEO）：搜索引擎在做网页排名的时候，要根据网页内容才能给网页权重，来进行网页的排名。搜索引擎是可以识别html内容的，而我们每个页面所有的内容都放在Html中，所以这种多页应用，SEO排名效果好。<br>
（3）页面切换慢：因为每次跳转都需要发出一个http请求，如果网络比较慢，在页面之间来回跳转时，就会发现明显的卡顿。<br>
**3、单页应用**<br>
只有一个Web主页面的应用，公共资源（js、css等）仅需加载一次，所有的内容都包含在主页面，对每一个功能模块组件化。单页应用的跳转就是切换相关组件，仅刷新局部资源。常用于PC端官网、购物等网站。<br>
第一次进入页面时会请求一个html文件，切换到其他组件时页面路径发生改变，但是并没有新的html文件请求，页面内容也变化了。**原理：**JS能检测到url的变化，通过这一点，可以用js动态的将当前页面的内容清除掉，然后将下一个页面的内容挂载到当前页面上，这个页面路由并不是通过服务端来做的，而是通过前端来做，判断页面到底是显示哪个组件，清除不需要的，显示需要的组件。这种过程就是单页应用，每次跳转的时候不需要再请求html文件。<br>
**4、单页应用的优缺点：**<br>
（1）页面切换快：页面每次切换跳转时，并不需要做html文件的请求，节约了很多http发送时延，切换页面的时候速度很快。<br>
（2）首屏时间慢：单页应用的首屏时间慢，首屏时需要请求一次html，同时还要发送一次js请求，两次请求回来了，首屏才会展示出来。相对于多页应用，首屏时间慢。<br>
（3）不利于SEO：SEO效果差，因为搜索引擎只认识html里的内容，不认识js的内容，而单页应用的内容都是靠js渲染生成出来的，搜索引擎不识别这部分内容，也就不会给一个好的排名，会导致单页应用做出来的网页在百度和谷歌上的排名差。<br>
**5、表格对比：**<br>
![SPA与MPA.png](/instructPic/SPA与MPA.png)

#### 六、Vue中如何优化首页加载速度
1、路由懒加载，首页加载的时候，不让其他页面加载，减缓首页压力。<br>
2、element-ui等组件库按需加入。<br>
3、首先打包时可以分为多个模块，其次要缩小文件体积，一些第三方库可以通过外链的方式引入。<br>

#### 七、component标签的作用
```html
<component :is="componentId"></component>
```
Vue中提供了 `<component>` 内置组件，通过它的 `is` 属性可以实现像多标签界面中不同组件的动态切换，创建动态组件。<br>

#### 八、keep-alive标签的原理是什么？有什么功能？
```html
<!-- 失活的组件将会被缓存！-->
<keep-alive :include="allowList" :exclude="noAllowList" :max="amount">
  <component :is="componentId"></component>
</keep-alive>
```
Vue中提供了 `<keep-alive>` 内置组件，当它包裹动态组件时，会缓存不活动的组件实例，而不是销毁它们。和 `<transition>` 相似，`<keep-alive>` 是一个抽象组件，自身不会渲染成一个DOM元素，也不会出现在父组件链中。<br>
**作用：**在组件切换过程中将状态保留在内存中，防止重复渲染DOM，减少加载时间及性能消耗，提高用户体验性。<br>
**属性：**<br>
（1）`include`：可传字符串、正则表达式、数组。只有名称匹配的组件会被缓存。<br>
（2）`exclude`：可传字符串、正则表达式、数组。任何名称匹配的组件都不会被缓存。<br>
（3）`max`：数字。最多可以缓存多少组件实例。<br>
**生命周期：**被包含在 `<keep-alive>` 中创建的组件，会多出两个生命周期钩子 `activated` 和 `deactivated`。<br>
1、`activated`，在 `<keep-alive>` 组件激活时调用。<br>
2、`deactivated`，在 `<keep-alive>` 组件停用时调用。<br>
